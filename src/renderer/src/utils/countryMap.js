/**
 * å›½å®¶ä»£ç åˆ°ä¸­æ–‡åç§°å’Œå›½æ—— emoji çš„æ˜ å°„
 */
export const countryMap = {
  // äºšæ´²
  CN: { name: 'ä¸­å›½', flag: 'ğŸ‡¨ğŸ‡³' },
  JP: { name: 'æ—¥æœ¬', flag: 'ğŸ‡¯ğŸ‡µ' },
  KR: { name: 'éŸ©å›½', flag: 'ğŸ‡°ğŸ‡·' },
  IN: { name: 'å°åº¦', flag: 'ğŸ‡®ğŸ‡³' },
  SG: { name: 'æ–°åŠ å¡', flag: 'ğŸ‡¸ğŸ‡¬' },
  TH: { name: 'æ³°å›½', flag: 'ğŸ‡¹ğŸ‡­' },
  VN: { name: 'è¶Šå—', flag: 'ğŸ‡»ğŸ‡³' },
  MY: { name: 'é©¬æ¥è¥¿äºš', flag: 'ğŸ‡²ğŸ‡¾' },
  ID: { name: 'å°åº¦å°¼è¥¿äºš', flag: 'ğŸ‡®ğŸ‡©' },
  PH: { name: 'è²å¾‹å®¾', flag: 'ğŸ‡µğŸ‡­' },
  PK: { name: 'å·´åŸºæ–¯å¦', flag: 'ğŸ‡µğŸ‡°' },
  BD: { name: 'å­ŸåŠ æ‹‰å›½', flag: 'ğŸ‡§ğŸ‡©' },
  HK: { name: 'é¦™æ¸¯', flag: 'ğŸ‡­ğŸ‡°' },
  TW: { name: 'å°æ¹¾', flag: 'ğŸ‡¹ğŸ‡¼' },
  MO: { name: 'æ¾³é—¨', flag: 'ğŸ‡²ğŸ‡´' },

  // åŒ—ç¾
  US: { name: 'ç¾å›½', flag: 'ğŸ‡ºğŸ‡¸' },
  CA: { name: 'åŠ æ‹¿å¤§', flag: 'ğŸ‡¨ğŸ‡¦' },
  MX: { name: 'å¢¨è¥¿å“¥', flag: 'ğŸ‡²ğŸ‡½' },

  // å—ç¾
  BR: { name: 'å·´è¥¿', flag: 'ğŸ‡§ğŸ‡·' },
  AR: { name: 'é˜¿æ ¹å»·', flag: 'ğŸ‡¦ğŸ‡·' },
  CL: { name: 'æ™ºåˆ©', flag: 'ğŸ‡¨ğŸ‡±' },
  CO: { name: 'å“¥ä¼¦æ¯”äºš', flag: 'ğŸ‡¨ğŸ‡´' },
  PE: { name: 'ç§˜é²', flag: 'ğŸ‡µğŸ‡ª' },

  // æ¬§æ´²
  GB: { name: 'è‹±å›½', flag: 'ğŸ‡¬ğŸ‡§' },
  DE: { name: 'å¾·å›½', flag: 'ğŸ‡©ğŸ‡ª' },
  FR: { name: 'æ³•å›½', flag: 'ğŸ‡«ğŸ‡·' },
  IT: { name: 'æ„å¤§åˆ©', flag: 'ğŸ‡®ğŸ‡¹' },
  ES: { name: 'è¥¿ç­ç‰™', flag: 'ğŸ‡ªğŸ‡¸' },
  NL: { name: 'è·å…°', flag: 'ğŸ‡³ğŸ‡±' },
  RU: { name: 'ä¿„ç½—æ–¯', flag: 'ğŸ‡·ğŸ‡º' },
  PL: { name: 'æ³¢å…°', flag: 'ğŸ‡µğŸ‡±' },
  SE: { name: 'ç‘å…¸', flag: 'ğŸ‡¸ğŸ‡ª' },
  NO: { name: 'æŒªå¨', flag: 'ğŸ‡³ğŸ‡´' },
  FI: { name: 'èŠ¬å…°', flag: 'ğŸ‡«ğŸ‡®' },
  DK: { name: 'ä¸¹éº¦', flag: 'ğŸ‡©ğŸ‡°' },
  CH: { name: 'ç‘å£«', flag: 'ğŸ‡¨ğŸ‡­' },
  AT: { name: 'å¥¥åœ°åˆ©', flag: 'ğŸ‡¦ğŸ‡¹' },
  BE: { name: 'æ¯”åˆ©æ—¶', flag: 'ğŸ‡§ğŸ‡ª' },
  IE: { name: 'çˆ±å°”å…°', flag: 'ğŸ‡®ğŸ‡ª' },
  PT: { name: 'è‘¡è„ç‰™', flag: 'ğŸ‡µğŸ‡¹' },
  GR: { name: 'å¸Œè…Š', flag: 'ğŸ‡¬ğŸ‡·' },
  CZ: { name: 'æ·å…‹', flag: 'ğŸ‡¨ğŸ‡¿' },
  RO: { name: 'ç½—é©¬å°¼äºš', flag: 'ğŸ‡·ğŸ‡´' },
  UA: { name: 'ä¹Œå…‹å…°', flag: 'ğŸ‡ºğŸ‡¦' },

  // å¤§æ´‹æ´²
  AU: { name: 'æ¾³å¤§åˆ©äºš', flag: 'ğŸ‡¦ğŸ‡º' },
  NZ: { name: 'æ–°è¥¿å…°', flag: 'ğŸ‡³ğŸ‡¿' },

  // éæ´²
  ZA: { name: 'å—é', flag: 'ğŸ‡¿ğŸ‡¦' },
  EG: { name: 'åŸƒåŠ', flag: 'ğŸ‡ªğŸ‡¬' },
  NG: { name: 'å°¼æ—¥åˆ©äºš', flag: 'ğŸ‡³ğŸ‡¬' },
  KE: { name: 'è‚¯å°¼äºš', flag: 'ğŸ‡°ğŸ‡ª' },

  // ä¸­ä¸œ
  AE: { name: 'é˜¿è”é…‹', flag: 'ğŸ‡¦ğŸ‡ª' },
  SA: { name: 'æ²™ç‰¹é˜¿æ‹‰ä¼¯', flag: 'ğŸ‡¸ğŸ‡¦' },
  IL: { name: 'ä»¥è‰²åˆ—', flag: 'ğŸ‡®ğŸ‡±' },
  TR: { name: 'åœŸè€³å…¶', flag: 'ğŸ‡¹ğŸ‡·' },
  IR: { name: 'ä¼Šæœ—', flag: 'ğŸ‡®ğŸ‡·' },

  // å…¶ä»–
  UNKNOWN: { name: 'æœªçŸ¥', flag: 'ğŸ³ï¸' }
}

/**
 * è·å–å›½å®¶çš„ä¸­æ–‡åç§°å’Œå›½æ——
 * @param {string} countryCode - å›½å®¶ä»£ç ï¼ˆå¦‚ CN, USï¼‰
 * @returns {{name: string, flag: string, flagUrl: string, code: string}}
 */
export function getCountryInfo(countryCode) {
  if (!countryCode) {
    return { ...countryMap.UNKNOWN, flagUrl: '', code: 'UNKNOWN' }
  }

  const code = countryCode.toUpperCase()
  const info = countryMap[code] || { name: countryCode, flag: 'ğŸ³ï¸' }

  return {
    ...info,
    code,
    flagUrl: code !== 'UNKNOWN' ? `https://flagcdn.com/112x84/${code.toLowerCase()}.png` : ''
  }
}

/**
 * æ ¹æ®å›½å®¶åç§°ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼‰è·å–å›½å®¶ä¿¡æ¯
 * @param {string} countryName - å›½å®¶åç§°
 * @returns {{name: string, flag: string, flagUrl: string, code: string}}
 */
export function getCountryInfoByName(countryName) {
  if (!countryName) {
    return { ...countryMap.UNKNOWN, code: 'UNKNOWN', flagUrl: '' }
  }

  // å…ˆå°è¯•ä½œä¸ºä»£ç æŸ¥æ‰¾
  const upperName = countryName.toUpperCase()
  if (countryMap[upperName]) {
    return {
      ...countryMap[upperName],
      code: upperName,
      flagUrl: `https://flagcdn.com/112x84/${upperName.toLowerCase()}.png`
    }
  }

  // å°è¯•ä½œä¸ºä¸­æ–‡åç§°æŸ¥æ‰¾
  for (const [code, info] of Object.entries(countryMap)) {
    if (info.name === countryName) {
      return {
        ...info,
        code,
        flagUrl: `https://flagcdn.com/112x84/${code.toLowerCase()}.png`
      }
    }
  }

  // å°è¯•æ¨¡ç³ŠåŒ¹é…
  const lowerName = countryName.toLowerCase()
  for (const [code, info] of Object.entries(countryMap)) {
    if (info.name.includes(countryName) || code.toLowerCase() === lowerName) {
      return {
        ...info,
        code,
        flagUrl: `https://flagcdn.com/112x84/${code.toLowerCase()}.png`
      }
    }
  }

  return { name: countryName, flag: 'ğŸ³ï¸', code: 'UNKNOWN', flagUrl: '' }
}
