# v1.1.5 更新日志

发布日期：2025-12-20

## ✨ 新功能

### 任务导入导出增强

- **批量验证统计信息保存**：
  - 导出任务时会保存批量验证的统计信息（总数、安全、漏洞、错误、劫持成功、劫持失败）
  - 导入任务时会恢复这些统计信息，不再显示 0
  - 支持断点续爬时查看之前的验证进度

### 拖拽导入功能

- **拖拽文件导入**：
  - 支持将 `.task.r2stb` 文件拖拽到应用窗口的任何位置
  - 拖拽时显示蓝色遮罩层和提示文字
  - 放置文件后弹出确认对话框
  - 自动跳转到批量验证页面（如果不在该页面）
  - 与双击文件导入效果完全一致

## 🎨 界面优化

### 导入进度显示

- **双击文件导入优化**：
  - 双击 `.task.r2stb` 文件时立即显示导入进度对话框
  - 进度对话框显示导入阶段和文件大小信息
  - 如果密码错误，关闭进度对话框并显示密码输入框

### 拖拽交互优化

- **拖拽遮罩层**：
  - 拖拽文件进入窗口时显示半透明蓝色遮罩
  - 显示文件导入图标和提示文字
  - 支持拖拽计数，避免遮罩层闪烁

## 🔧 技术改进

### 文件处理优化

- **兼容性增强**：
  - 优先使用 `file.path` 属性（如果可用）
  - 如果 `file.path` 不可用，读取文件内容并保存到临时目录
  - 支持所有 Electron 版本和配置

### 主进程功能扩展

- **新增 API**：
  - `saveDroppedTaskFile`：保存拖拽的文件到临时目录
  - 自动生成带时间戳的临时文件名，避免冲突
  - 返回临时文件路径供后续导入使用

## 📝 国际化

### 新增翻译

- 添加了 `batch.importDialog.dropToImport` 翻译
- 支持 12 种语言：
  - 中文简体、中文繁体、英文
  - 日文、韩文、德语、法语
  - 西班牙语、意大利语、葡萄牙语
  - 俄语、印地语

## 🐛 Bug 修复

- **任务导入修复**：修复了导入任务后批量验证统计信息显示为 0 的问题
- **文件路径处理**：修复了某些情况下无法获取拖拽文件路径的问题

---

## 升级说明

本次更新增强了任务导入导出功能，建议所有用户更新。更新后：

1. 导出的任务文件会包含批量验证统计信息
2. 可以通过拖拽方式快速导入任务文件
3. 双击文件导入时会显示进度对话框

## 已知问题

无

---

**完整更新内容请查看 [GitHub Releases](https://github.com/MoLeft/React2Shell-Toolbox/releases/tag/v1.1.5)**
