# v1.0.1 更新说明

## ✨ 新功能

### 启动时自动检查更新

- **自动检查更新**
  - 应用启动时自动检查是否有新版本
  - 使用 loading toast 提示检查进度
  - 发现新版本时自动弹窗显示更新内容
  - 可在设置中关闭此功能

### Changelog 管理

- **本地更新说明**
  - 更新说明优先从本地 changelog 目录读取
  - 支持 Markdown 格式，可读性更强
  - 支持离线查看更新内容

## 🐛 Bug 修复

### 修复设置不生效的问题

- **修复内容**
  - 修复了请求超时设置未应用的问题
  - 修复了代理设置未生效的问题
  - 修复了 SSL 证书忽略选项未生效的问题
  - 现在所有设置都会正确应用到 POC 执行、虚拟终端等功能中

### 修复 SSL 证书验证问题

- **彻底解决证书错误**
  - 修复了"忽略 SSL 证书错误"选项在使用代理时不生效的问题
  - 修复了 IP 地址与证书主机名不匹配的错误（Hostname/IP does not match certificate's altnames）
  - 添加了 SNI (Server Name Indication) 检查禁用
  - 添加了主机名验证禁用（checkServerIdentity）
  - 使用全局 TLS 设置确保所有场景下都能正确忽略证书错误
  - 支持自签名证书、过期证书、主机名不匹配等各种证书问题

### 修复 HTTP 协议支持问题

- **修复 HTTP 协议错误**
  - 修复了访问 HTTP 协议网站时报错 "Protocol 'http:' not supported. Expected 'https:'" 的问题
  - 修复了虚拟终端创建会话失败的问题
  - 修复了 favicon 获取失败的问题
  - 优化了 axios agent 配置，只在 HTTPS 请求时使用 httpsAgent
  - 确保 HTTP 和 HTTPS 协议都能正常工作

### 修复虚拟终端 CORS 问题

- **解决跨域限制**
  - 修复了虚拟终端 SSE 连接被 CORS 策略阻止的问题
  - 将 SSE 连接从渲染进程移至主进程处理
  - 通过 IPC 转发 SSE 数据到前端
  - 完全避免了浏览器的 CORS 限制
  - 虚拟终端现在可以正常连接和使用

## 🔧 技术改进

- 重构了设置加载逻辑，确保所有网络请求都使用用户配置
- 优化了代理配置的应用方式，支持 SOCKS5/HTTP/HTTPS 代理
- 改进了 axios 配置的管理，区分 HTTP 和 HTTPS 协议
- 优化了更新检查逻辑
- 增强了 TLS/SSL 配置的灵活性和兼容性
- 重构了虚拟终端 SSE 连接机制，使用主进程处理网络请求
- 添加了详细的错误日志，便于问题排查
- 优化了 favicon 获取逻辑，支持 HTTP 和 HTTPS 网站

## 📝 使用说明

更新后，请重新配置您的设置（超时时间、代理等），设置将立即生效。

**关于 SSL 证书忽略：**

- 启用"忽略 SSL 证书错误"后，可以访问使用自签名证书或证书过期的网站
- 支持直接使用 IP 地址访问 HTTPS 网站（即使证书中没有该 IP）
- 该选项在使用代理时同样有效
- 注意：忽略证书验证会降低安全性，仅在测试环境中使用

如不希望启动时自动检查更新，可在设置页面关闭此功能。
